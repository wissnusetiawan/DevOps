name: 1.0.$(Rev:r)

trigger:
    branches:
      include:
        - main

schedules:
    - cron: "0 0 * * *"
      always: true
      displayName: Daily build
      branches:
          include:
            - main

pool:
    vmImage: ubuntu-latest

variables:
  registry_name: 'DevOpsGuy'
  repository_name: 'hello-world'
  image: 'hello-world'

steps:

  - task: AzureCLI@2
    displayName: Clean Docker Image
    inputs:
      azureSubscription: 'That DevOps Guy'
      scriptType: 'bash'
      scriptLocation: 'scriptPath'
      scriptPath: '$(System.DefaultWorkingDirectory)/bash-scripts/clean-up-image.sh'
      arguments: '$(registry_name) $(repository_name) $(image)'
      workingDirectory: '$(System.DefaultWorkingDirectory)/bash-scripts/'

